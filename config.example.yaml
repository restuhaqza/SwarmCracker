# SwarmCracker Configuration Example
# Copy this to /etc/swarmcracker/config.yaml and customize

executor:
  name: firecracker
  kernel_path: "/usr/share/firecracker/vmlinux"
  initrd_path: ""
  rootfs_dir: "/var/lib/firecracker/rootfs"
  socket_dir: "/var/run/firecracker"
  default_vcpus: 1
  default_memory_mb: 512
  enable_jailer: false
  # Init system for proper process lifecycle management
  # Options: "none", "tini" (default, recommended), "dumb-init"
  init_system: "tini"
  # Grace period in seconds before SIGKILL during shutdown
  init_grace_period: 10
  jailer:
    uid: 1000
    gid: 1000
    chroot_base_dir: "/srv/jailer"
    netns: ""

network:
  # Bridge device name on host
  bridge_name: "swarm-br0"

  # Subnet for VM network (CIDR notation)
  subnet: "192.168.127.0/24"

  # Bridge IP address (CIDR notation) - gateway for VMs
  bridge_ip: "192.168.127.1/24"

  # IP allocation mode: "static" (deterministic) or "dhcp" (requires external DHCP)
  ip_mode: "static"

  # Enable NAT/masquerading for internet access
  nat_enabled: true

  # Rate limiting (optional)
  enable_rate_limit: false
  max_packets_per_sec: 10000

logging:
  level: "info"
  format: "text"
  output: "stdout"

images:
  cache_dir: "/var/cache/swarmcracker"
  max_cache_size_mb: 1024
  enable_layer_cache: true

metrics:
  enabled: false
  address: "localhost:9090"
  format: "prometheus"
